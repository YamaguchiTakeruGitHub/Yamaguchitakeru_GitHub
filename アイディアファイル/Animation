#pragma once
#include "AnimationManager.h"
#include "DxLib.h"

class Player
{
public:
    Player();
    void Init();
    void Update(float deltaTime);
    void Render();

private:
    VECTOR position;
    int modelHandle;

    AnimationManager animationManager;
    std::string currentAnimation;
};


#include "Player.h"

Player::Player()
    : position(VGet(0.0f, 0.0f, 0.0f)), modelHandle(-1), currentAnimation("Idle")
{
}

void Player::Init()
{
    modelHandle = MV1LoadModel("path/to/your/playerModel.mv1"); // モデルのロード

    // アニメーションの初期化
    animationManager.InitChangeAnimation("Player", modelHandle);
}

void Player::Update(float deltaTime)
{
    // プレイヤーの操作（例: キーボードやジョイパッドの入力）
    if (CheckHitKey(KEY_INPUT_W)) // 前進
    {
        position.z += 1.0f; // 例: 移動
        currentAnimation = "Run";
    }
    else if (CheckHitKey(KEY_INPUT_SPACE)) // 攻撃
    {
        currentAnimation = "Attack";
    }
    else
    {
        currentAnimation = "Idle";
    }

    // アニメーションの更新
    animationManager.ChangeAnimation("Player", currentAnimation);
    animationManager.Update(deltaTime);

    // モデルのアニメーション時間を更新
    MV1SetPosition(modelHandle, position);
}

void Player::Render()
{
    // モデルを描画
    MV1DrawModel(modelHandle);
}