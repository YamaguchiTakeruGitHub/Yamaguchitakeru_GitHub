#pragma once
#include "AnimationManager.h"
#include "DxLib.h"

class Player
{
public:
    Player();
    void Init();
    void Update(float deltaTime);
    void Render();

private:
    VECTOR position;
    int modelHandle;

    AnimationManager animationManager;
    std::string currentAnimation;
};


#include "Player.h"

Player::Player()
    : position(VGet(0.0f, 0.0f, 0.0f)), modelHandle(-1), currentAnimation("Idle")
{
}

void Player::Init()
{
    modelHandle = MV1LoadModel("path/to/your/playerModel.mv1"); // モデルのロード

    // アニメーションの初期化
    animationManager.InitChangeAnimation("Player", modelHandle);
}

void Player::Update(float deltaTime)
{
    // プレイヤーの操作（例: キーボードやジョイパッドの入力）
    if (CheckHitKey(KEY_INPUT_W)) // 前進
    {
        position.z += 1.0f; // 例: 移動
        currentAnimation = "Run";
    }
    else if (CheckHitKey(KEY_INPUT_SPACE)) // 攻撃
    {
        currentAnimation = "Attack";
    }
    else
    {
        currentAnimation = "Idle";
    }

    // アニメーションの更新
    animationManager.ChangeAnimation("Player", currentAnimation);
    animationManager.Update(deltaTime);

    // モデルのアニメーション時間を更新
    MV1SetPosition(modelHandle, position);
}

void Player::Render()
{
    // モデルを描画
    MV1DrawModel(modelHandle);
}

Hpバーコード下

#pragma once
#include "DxLib.h"

class Player
{
public:
    Player();
    void Init();
    void Update(float deltaTime);
    void Render();

    // HP関連の関数
    void TakeDamage(int damage); // ダメージを受ける

private:
    VECTOR position;
    int modelHandle;

    // HP関連
    int maxHP;
    int currentHP;

    // HPバーのサイズや位置
    int hpBarWidth;
    int hpBarHeight;
    int hpBarPosX;
    int hpBarPosY;

    void DrawHPBar(); // HPバーの描画
};
#include "Player.h"

Player::Player()
    : position(VGet(0.0f, 0.0f, 0.0f)), modelHandle(-1), maxHP(100), currentHP(100),
      hpBarWidth(200), hpBarHeight(20), hpBarPosX(50), hpBarPosY(50)
{
}

void Player::Init()
{
    modelHandle = MV1LoadModel("path/to/your/playerModel.mv1");
}

void Player::Update(float deltaTime)
{
    // 例: ダメージを受けたとき
    if (CheckHitKey(KEY_INPUT_D))
    {
        TakeDamage(10); // ダメージを受ける
    }

    // プレイヤーの位置などを更新
    MV1SetPosition(modelHandle, position);
}

void Player::Render()
{
    // モデルの描画
    MV1DrawModel(modelHandle);

    // HPバーの描画
    DrawHPBar();
}

void Player::TakeDamage(int damage)
{
    currentHP -= damage;
    if (currentHP < 0)
    {
        currentHP = 0; // HPが0以下にならないように制限
    }
}

void Player::DrawHPBar()
{
    // HPバーのバックグラウンド（空のバー）
    DrawBox(hpBarPosX, hpBarPosY, hpBarPosX + hpBarWidth, hpBarPosY + hpBarHeight, GetColor(255, 0, 0), TRUE);

    // 現在のHPに応じたバーの長さを計算
    int currentBarWidth = static_cast<int>((float)currentHP / maxHP * hpBarWidth);

    // HPバーの前面（現在のHPを示すバー）
    DrawBox(hpBarPosX, hpBarPosY, hpBarPosX + currentBarWidth, hpBarPosY + hpBarHeight, GetColor(0, 255, 0), TRUE);
}



